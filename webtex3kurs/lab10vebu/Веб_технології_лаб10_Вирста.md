# Міністерство освіти і науки України
## Львівський національний університет природокористування
### Факультет механіки, енергетики та інформаційних технологій
#### Кафедра інформаційних технологій

---

# **Звіт**
про виконання лабораторної роботи №10  
з дисципліни **«Веб технології та веб дизайн»**  
на тему:  
**Розробка повноцінного веб-застосунку "Список завдань (Todo App) з авторизацією"**

**Виконав:** студент групи **КН-31**, Вирста Андрій  
**Прийняв:** викл. **Тарас Квасниця**

**Львів — 2025**

---

# **Мета роботи**

Метою даної лабораторної роботи є створення повноцінного веб-застосунку формату Full-Stack, який включає:

- клієнтську частину (HTML, CSS, JavaScript);
- серверну частину (Node.js + Express.js);
- REST API з підтримкою CRUD-операцій;
- авторизацію та реєстрацію користувачів через сесії;
- зберігання даних у форматі JSON;
- реалізацію валідації даних;
- побудову діаграм для статистики завдань через Chart.js.

Цей застосунок поєднує всі теми, розглянуті у попередніх лабораторних роботах.

---

# **Теоретичні відомості**

## **1. Архітектура веб-застосунку**

Застосунок реалізовано за принципами Full-Stack:

| Рівень | Технології | Опис |
|-------|-------------|-------|
| Фронтенд | HTML5, CSS3, JavaScript, Chart.js | Інтерфейс користувача, взаємодія, динамічне оновлення DOM |
| Бекенд | Node.js, Express.js | Логіка застосунку, обробка запитів |
| API | REST (JSON) | Комунікація між клієнтом і сервером |
| Дані | JSON-файли | Модель зберігання інформації про користувачів і завдання |

### Особливості підходу:

- повна автономність проєкту (без MySQL/MongoDB);
- модульна структура;
- використання middleware і маршрутизації;
- підтримка сесій.

---

## **2. REST API**

REST — стиль побудови веб-сервісів, в якому CRUD-операції прив’язуються до HTTP-методів:

Метод | Маршрут | Призначення
------|---------|-------------
GET | /api/tasks | Отримання всіх завдань користувача
POST | /api/tasks | Створення нового завдання
PUT | /api/tasks/:id | Зміна існуючого завдання
DELETE | /api/tasks/:id | Видалення завдання

REST API дозволяє легко взаємодіяти з даними з клієнтської частини.

---

## **3. Аутентифікація**

Аутентифікація реалізована через:

- **bcrypt** — безпечне хешування паролів;
- **express-session** — сесії користувача;
- **middleware isAuthenticated** — перевірка доступу.

### Приклад:

```javascript
const isAuthenticated = (req, res, next) => {
  if (req.session.user) next();
  else res.status(401).json({ redirect: '/login.html' });
};
```

Користувачі зберігаються у файлі **users.json**.

---

## **4. Валідація**

Валідацію реалізовано через пакет **express-validator**.

Приклад:

```javascript
const taskValidation = [
  body('title').trim().isLength({ min: 1, max: 100 }),
  body('priority').optional().isIn(['низька', 'середня', 'висока'])
];
```

Помилки повертаються у форматі:

```json
{ "errors": [ ... ] }
```

---

## **5. Chart.js — статистика виконання завдань**

Для візуалізації використано кругову діаграму:

```javascript
new Chart(ctx, {
  type: 'doughnut',
  data: {
    labels: ['Виконано', 'Не виконано'],
    datasets: [{ data: [completed, total - completed] }]
  }
});
```

Переваги:

- наочність;
- автоматичне оновлення після CRUD-операцій;
- мінімум коду.

---

# **Хід роботи**

## **1. Підготовка структури проєкту**

Створено каталог:

```
todo-app/
 ├── public/
 │    ├── index.html
 │    ├── login.html
 │    ├── register.html
 │    ├── dashboard.html
 │    ├── js/app.js
 │    └── css/style.css
 ├── data/
 │    ├── users.json
 │    └── tasks.json
 ├── utils/db.js
 ├── server.js
 └── package.json
```

---

## **2. Ініціалізація проєкту**

```bash
npm init -y
npm install express express-session bcrypt express-validator chart.js
```

---

## **3. Реалізація серверної частини**

Файл **server.js** містить:

- підключення middleware;
- реалізацію API для авторизації;
- CRUD-операції;
- захист маршрутів.

### Фрагмент:

```javascript
app.post('/api/login', async (req, res) => {
  const users = await db.read('data/users.json');
  const user = users.find(u => u.email === req.body.email);
  const valid = await bcrypt.compare(req.body.password, user.password);

  if (!valid) return res.status(400).json({ error: 'Невірні дані' });

  req.session.user = { id: user.id, name: user.name };
  res.json({ success: true });
});
```

---

## **4. Реалізація клієнтської частини**

### **login.html**, **register.html**
- форми надсилають дані на сервер через Fetch API;
- сервер створює сесію після успішного входу.

### **dashboard.html**
Містить:
- список завдань;
- фільтри;
- діаграму Chart.js.

### **app.js**
Керує:
- авторизацією;
- відображенням завдань;
- викликом API;
- оновленням графіків.

---

## **5. Тестування застосунку**

Було перевірено:

✔ реєстрація нового користувача  
✔ логін через сесію  
✔ додавання нового завдання  
✔ оновлення назви / статусу  
✔ видалення  
✔ фільтрація завдань  
✔ оновлення діаграми  
✔ захист доступу до dashboard.html  

---

# **Результати роботи**

В результаті виконання роботи:

- створено повний Full-Stack застосунок;
- реалізовані REST API та CRUD-операції;
- налаштовано авторизацію через сесії;
- повністю динамічний фронтенд із діаграмами;
- функціонал повністю відповідає вимогам ТЗ;
- структура коду модульна і розширювана.

---

# **Висновки**

У ході цієї лабораторної роботи я:

- закріпив навички роботи з Express.js;
- отримав практичний досвід реалізації REST API;
- освоїв роботу з bcrypt та сесіями;
- створив інтерактивний інтерфейс із динамічним оновленням;
- навчився працювати з Chart.js;
- поєднав усі знання з курсу у завершений проєкт.

Результатом став повноцінний веб-застосунок Todo App, який може використовуватися як основа для більших проєктів.

---

# **Контрольні питання**

### 1. Як захистити API від неавторизованого доступу?
Через middleware, що перевіряє сесію:

```javascript
if (!req.session.user) return res.status(401)
```

### 2. Як забезпечити, щоб користувач бачив лише свої завдання?
Фільтрування по `userId`:

```javascript
tasks.filter(t => t.userId === req.session.user.id)
```

### 3. Як Chart.js отримує дані?
Через виклик `fetch('/api/tasks')`, після чого дані передаються у Chart.js.

### 4. Як оновити діаграму після видалення завдання?
Діаграма перегенеровується через:

```javascript
chart.destroy();
chart = new Chart(...)
```

### 5. Як працює фільтрація завдань?
За допомогою функції:

```javascript
tasks.filter(...)
```

### 6. Чим відрізняються session та localStorage?

| Session | localStorage |
|--------|--------------|
| Зберігається на сервері | Зберігається в браузері |
| Використовується для авторизації | НЕ варіант для конфіденційних даних |
| Безпечніша | Доступна JS-коду |

